<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>{{ title or "Assistants Playground" }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
      body { min-height: 100vh; }
      .sidebar {
        min-width: 200px;
        position: sticky;
        top: 0;
        height: 100vh;
      }
      .messages { max-height: 70vh; overflow-y: auto; }
      .message {
        max-width: 75%;
        padding: .5rem .75rem;
        border-radius: .5rem;
        animation: fadeIn .4s ease;
      }
      .message.user { background-color: #e9ecef; align-self: flex-start; }
      .message.assistant { background-color: #d1e7dd; align-self: flex-end; }
    </style>
</head>
<body>
<div id="toast-container" class="toast-container position-fixed top-0 end-0 p-3" style="z-index:1055"></div>
<div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 sidebar bg-light p-3">
      <h5>Меню</h5>
      <ul class="nav flex-column">
        <li class="nav-item"><a href="/" class="nav-link">Главная</a></li>
        <li class="nav-item"><a href="/assistants" class="nav-link">Ассистенты</a></li>
        <li class="nav-item"><a href="/filesearch" class="nav-link">File Search</a></li>
      </ul>
    </nav>
    <main class="col-md-10 p-4 animate__animated animate__fadeIn">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <script>
            window.addEventListener('DOMContentLoaded', () => {
              const msgs = {{ messages|tojson }};
              const container = document.getElementById('toast-container');
              msgs.forEach(m => {
                const t = document.createElement('div');
                t.className = 'toast align-items-center text-bg-warning border-0 mb-2';
                t.innerHTML = `<div class="d-flex"><div class="toast-body">${m}</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button></div>`;
                container.appendChild(t);
                new bootstrap.Toast(t, {delay: 5000}).show();
              });
            });
          </script>
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </main>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const msgBox = document.getElementById('messages');
  if (msgBox) {
    msgBox.scrollTop = msgBox.scrollHeight;
  }
</script>
</body>
</html>
